<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exactics</title>
    
    <!-- Stylesheets and Fonts -->
    <link href="index.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Revolutionizing healthcare accessibility with the next generation of rapid diagnostics">
    <meta property="og:url" content="https://exacticsbiotech.com">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Exactics">
    <meta property="og:description" content="Revolutionizing healthcare accessibility with the next generation of rapid diagnostics">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="exacticsbiotech.com">
    <meta property="twitter:url" content="https://exacticsbiotech.com">
    <meta name="twitter:title" content="Exactics">
    <meta name="twitter:description" content="Revolutionizing healthcare accessibility with the next generation of rapid diagnostics">
    
    <!-- Inline Styles for Page Layout and Design -->
    <style>
        /* General Reset and Styling */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
            overflow-x: hidden;
        }

        nav {
            width: 100%;
            padding: 20px;
            background-color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }

        nav .nav__title img {
            height: 40px;
        }

        nav .nav__buttons a {
            text-decoration: none;
            color: #333;
            padding: 10px 20px;
            border: 1px solid #333;
            border-radius: 4px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        nav .nav__buttons a:hover {
            background-color: #333;
            color: #fff;
        }

        main {
            width: 100%;
            max-width: 1200px;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 10;
        }

        .section {
            width: 100%;
            margin-bottom: 40px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            position: relative;
            z-index: 5;
        }

        .section__container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .h1 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #333;
        }

        p {
            font-size: 1rem;
            line-height: 1.6;
            color: #666;
            margin-bottom: 20px;
        }

        .waitlist__form {
            display: flex;
            margin-bottom: 10px;
        }

        .waitlist__input {
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            flex: 1;
        }

        .button {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            border-radius: 0 4px 4px 0;
            transition: background-color 0.3s ease;
        }

        .button:hover {
            background-color: #0056b3;
        }

        .video-container {
            margin-top: 20px;
        }

        iframe {
            border: none;
            border-radius: 8px;
        }

        footer {
            width: 100%;
            padding: 20px;
            background-color: #333;
            color: #fff;
            text-align: center;
        }

        .footer__left,
        .footer__right {
            margin-bottom: 10px;
        }

        .footer__address {
            line-height: 1.6;
        }

        /* Popup container */
        .popup {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .popup-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            border-radius: 8px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
        }

        /* Canvas for Three.js Animated Background */
        #c {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: #e0f7e9; /* Base color for the green animated background */
        }

        #carton {
            display: none; /* Hidden unless used */
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav>
        <a class="nav__title" href="https://exacticsbiotech.com/">
            <img src="img/logo.svg" alt="Exactics logo">
        </a>
        <div class="nav__buttons">
            <a class="nav__button" href="mailto:business@exacticsbiotech.com">Contact</a>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main>
        <!-- About Us Section -->
        <section class="section section--about">
            <div class="section__container">
                <h1 class="h1">About Us</h1>
                <p>
                    In 2018, Julian Kage, CEO and Founder of Exactics, invented and patented QuickLyme, the first 15-minute rapid test for Lyme disease. He secured a second patent for a versatile core test design adaptable to over 200 arthropod-borne diseases, including Malaria, Zika, and Dengue Fever. This novel design enables easy antibody swaps, allowing for customizable tests across various diseases while minimizing manufacturing costs.
                </p>
                <b>Join our waitlist</b>
                <form class="waitlist__form" id="waitlist">
                    <input class="waitlist__input" required type="email" placeholder="jane@exacticsbiotech.com">
                    <button type="submit" class="button">Join</button>
                </form>
                <p><small>By clicking 'Join', you agree to our <a href="#" id="openPrivacyPopup">Privacy Policy.</a></small></p>

                <!-- The Popup -->
                <div id="privacyPopup" class="popup">
                    <div class="popup-content">
                        <span class="close">&times;</span>
                        <h2>Privacy Policy</h2>
                        <div name="termly-embed" data-id="caa3a2f8-64b1-4dbc-9e9c-8aef65c06da5"></div>
                        <script type="text/javascript">
                            (function(d, s, id) {
                                var js, tjs = d.getElementsByTagName(s)[0];
                                if (d.getElementById(id)) return;
                                js = d.createElement(s); js.id = id;
                                js.src = "https://app.termly.io/embed-policy.min.js";
                                tjs.parentNode.insertBefore(js, tjs);
                            }(document, 'script', 'termly-jssdk'));
                        </script>
                    </div>
                </div>
            </div>
        </section>

        <!-- QuickLyme Section -->
        <section class="section section--quicklyme">
            <div class="section__container">
                <h1 class="h1">QuickLyme&reg;</h1>
                <p>
                    Julian Kage, CEO of Exactics, developed QuickLyme, a rapid test that detects Lyme bacteria in ticks within 15 minutes and secured a patent with support from the Ford Foundation. Julian leads Exactics alongside Zach Sarmoen (CFO), Dylan Murray (COO), Sean Greeby (CSO), and Max Almeida (CTO). Our advisory board includes experts from Harvard Medical School, the University of Chicago, Lagos State University, and the University of Ibadan.
                </p>
                <!-- YouTube Video Embed -->
                <div class="video-container">
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/-ClR1yWZf1s?si=JMawsX-WjT7kEnOj" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer__left">
            &copy; 2024 Exactics LLC. All rights reserved.
        </div>
        <div class="footer__right">
            <div class="footer__address">
                Exactics LLC<br/>
                361 Main St<br/>
                Manchester, CT<br/>
                06040
            </div>
        </div>
    </footer>

    <!-- Canvas for Three.js Animated Background -->
    <canvas id="c"></canvas>
    <canvas id="carton"></canvas>

    <!-- Include Three.js Library -->
    <script type="module" src="./lib/three.module.js"></script>

    <!-- Your JavaScript for the Three.js Scene -->
    <script type="module">
        import * as THREE from './lib/three.module.js';

        // Constants for the number of balls and modifiers for mouse to interface movement
        const BALL_COUNT = 30; // Number of balls to be created in the scene
        const SHINY_COUNT = 7; // Number of shiny balls to be created in the scene
        const CAMERA_MOVE_MODIFIER = 0; // Modifier for camera movement speed
        const CARTON_MOVE_MODIFIER = 0.1; // Modifier for carton movement speed

        // CanvasDriver class, responsible for managing the main 3D scene
        class CanvasDriver {
            constructor() {
                // Initializing CartonDriver for a secondary 3D object
                this.carton = new CartonDriver();
                // Mouse setup with initial centered values
                this.mouse = {x: 0.5, y: 0.5};
                
                // Window dimensions for calculating half-width and half-height
                this.windowHalfX = window.innerWidth / 2;
                this.windowHalfY = window.innerHeight / 2;

                // Selecting the canvas element for rendering
                this.canvas = document.querySelector('canvas#c');

                // Setting up the perspective camera
                this.camera = new THREE.PerspectiveCamera(20, window.innerWidth / window.innerHeight, 1, 10000);
                this.camera.position.z = 1800; // Positioning the camera in the scene

                // Creating a new scene and object group for balls
                this.scene = new THREE.Scene();
                this.balls = new THREE.Object3D();
                // Setting the background color of the scene
                this.scene.background = new THREE.Color(0x728C69);

                // Adding a directional light to the scene
                const light = new THREE.DirectionalLight(0xffffff);
                light.position.set(0, 0, 1);
                this.scene.add(light);

                // Defining geometry and materials for the balls
                const radius = 20;
                const geometry1 = new THREE.IcosahedronGeometry(radius, 1);

                const material = new THREE.MeshPhongMaterial({
                    color: 0x597d35,
                    flatShading: true,
                    vertexColors: true,
                    shininess: 2
                });

                const wireframeMaterial = new THREE.MeshBasicMaterial({color: 0x000000, wireframe: true, transparent: true});

                this.meshes = []; // Array to hold all ball meshes

                // Creating ball meshes with wireframe material
                for (let i = 0; i < BALL_COUNT; i++) {
                    this.meshes.push({
                        mesh: new THREE.Mesh(geometry1, wireframeMaterial),
                        heading: this.make_new_heading(),
                        rotation: this.make_new_heading().multiplyScalar(1 / 300)
                    });
                }

                // Creating shiny ball meshes with solid material
                for (let i = 0; i < SHINY_COUNT; i++) {
                    this.meshes.push({
                        mesh: new THREE.Mesh(geometry1, material),
                        heading: this.make_new_heading(),
                        rotation: this.make_new_heading().multiplyScalar(1 / 200)
                    });
                }

                // Resetting position and other properties of each mesh
                for (let i = 0; i < this.meshes.length; i++) {
                    this.reset_mesh(i);
                }

                // BIG BOY (unused)
                this.bgmesh = {
                    mesh: new THREE.Mesh(
                        new THREE.IcosahedronGeometry(1900, 1),
                        wireframeMaterial
                    ),
                    rotation: new THREE.Vector3(0.0001, 0, 0.0001),
                    heading: new THREE.Vector3(0, 0, 0)
                };

                // Adding all meshes to the balls group
                for (let i in this.meshes) {
                    this.balls.add(this.meshes[i].mesh);
                }
                // Adding the balls group to the scene
                this.scene.add(this.balls);

                // Setting up the renderer
                this.renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    canvas: this.canvas
                });
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            }

            // Method to render the scene
            render() {
                this.renderer.render(this.scene, this.camera);
            }

            // Animation loop for continuous rendering
            animate() {
                requestAnimationFrame(this.animate.bind(this)); // Recursively calls animate
                this.carton.animate(); // Animates the carton object

                // Calculating target rotation based on mouse position
                const targetRotation = new THREE.Vector3(
                    this.mouse.x * CAMERA_MOVE_MODIFIER,
                    this.mouse.y * CAMERA_MOVE_MODIFIER,
                    0
                );
                const currentRotation = new THREE.Vector3(
                    this.balls.rotation.x,
                    this.balls.rotation.y,
                    this.balls.rotation.z
                );

                // Smoothly interpolates between current and target rotations
                currentRotation.lerp(targetRotation, 0.5);

                // Updating balls rotation
                this.balls.rotation.x = currentRotation.x;
                this.balls.rotation.y = currentRotation.y;
                this.balls.rotation.z = currentRotation.z;

                // Updating position and rotation of each mesh
                for (let i = 0; i < this.meshes.length; i++) {
                    this.meshes[i].mesh.position.add(this.meshes[i].heading);
                    this.meshes[i].mesh.rotation.x += this.meshes[i].rotation.x;
                    this.meshes[i].mesh.rotation.y += this.meshes[i].rotation.y;
                    this.meshes[i].mesh.rotation.z += this.meshes[i].rotation.z;

                    // Resetting the mesh if it reaches its target
                    if (this.meshes[i].mesh.position.distanceTo(this.meshes[i].target) < 100) {
                        this.reset_mesh(i);
                    }
                }

                this.render(); //Render scene
            }

            // Method to handle window resize
            on_window_resize() {
                this.windowHalfX = window.innerWidth / 2;
                this.windowHalfY = window.innerHeight / 2;

                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();

                this.renderer.setSize(window.innerWidth, window.innerHeight);

                this.carton.on_window_resize();
            }

            // Method to reset the position and heading of a mesh
            reset_mesh(index) {
                const obj = this.meshes[index];

                // place somewhere on the screen
                obj.mesh.position.x = -400 - (Math.random() * 2400);
                obj.mesh.position.y = -100 - (Math.random() * 700);
                obj.mesh.position.z = -400 - (Math.random() * 2400);

                // generate a random target
                const target = new THREE.Vector3(
                    600 + (Math.random() * 200),
                    200 + (Math.random() * 50),
                    600 + (Math.random() * 200)
                );

                obj.target = target.clone();
                // create a heading
                const heading = target.sub(obj.mesh.position).normalize().multiplyScalar(0.5);

                obj.heading = heading;

                obj.lifetime = 0;
                obj.mesh.material.opacity = 1;
            }

            // Method to generate a new random heading
            make_new_heading() {
                return new THREE.Vector3(
                    Math.random(),
                    Math.random(),
                    Math.random()
                );
            }

            // Method to handle mouse movement
            on_mouse_move(e) {
                this.mouse.x = (e.clientX / window.innerWidth);
                this.mouse.y = (e.clientY / window.innerHeight);
                this.carton.set_mouse(this.mouse);
            }
        }

        // CartonDriver class manages a 3D carton object
        class CartonDriver {
            constructor() {
                // Selecting the canvas for the carton
                this.canvas = document.querySelector('canvas#carton');
                const rect = this.canvas.getBoundingClientRect();
                // box art
                const carton_geometry = new THREE.BoxGeometry(13, 20, 7);
                const basic_material = new THREE.MeshPhongMaterial({color: 0xbacdb0, roughness: 0.5});
                
                this.carton = new THREE.Mesh(carton_geometry, basic_material);
                this.carton.position.z = 0;
                this.carton.position.x = 0;

                this.scene = new THREE.Scene();
                this.scene.add(this.carton);

                const light = new THREE.DirectionalLight(0xffffff);
                light.position.set(0, 0, 1);
                this.scene.add(light);

                this.camera = new THREE.PerspectiveCamera(20, rect.width / rect.height, 1, 10000);
                this.camera.position.z = 100;

                this.mouse = {x: 0, y: 0};

                // renderer
                this.renderer = new THREE.WebGLRenderer({
                    antialias: true,
                    alpha: true,
                    canvas: this.canvas
                });
                this.renderer.setClearColor(0x000000, 0); // the default
                this.scene.background = null;
                this.renderer.setPixelRatio(window.devicePixelRatio);
                this.renderer.setSize(rect.width, rect.height);
            }

            set_mouse(mouse) {
                this.mouse = mouse;
            }

            on_window_resize() {
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();

                const rect = this.canvas.getBoundingClientRect();
                this.renderer.setSize(rect.width, rect.height);
            }

            render() {
                this.renderer.render(this.scene, this.camera);
            }

            animate() {
                this.carton.rotation.x = this.mouse.y * CARTON_MOVE_MODIFIER;
                this.carton.rotation.y = this.mouse.x * CARTON_MOVE_MODIFIER;
                this.render();
            }
        }

        // Waitlist Signup Handler
        class WaitlistSignup {
            constructor(form_selector) {
                this.form = document.querySelector(form_selector);

                this.form.addEventListener(
                    'submit',
                    this.handleForm.bind(this)
                );
            }

            async handleForm(e) {
                e.preventDefault();

                this.form.classList.add('waitlist__form--loading');

                const email_inp = this.form.querySelector('input[type="email"]');

                let r = await fetch('https://link.exactics.science/api/signup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: email_inp.value
                    })
                });

                r = await r.json();

                if (r.ok) {
                    Swal.fire({
                        title: 'You\'re on the list!',
                        text: 'We\'ll be in touch when we\'re ready to launch.',
                        icon: 'success'
                    });

                    this.form.classList.remove('waitlist__form--loading');
                    email_inp.value = '';
                }
            }
        }

        // Initialize the scene and waitlist form on window load
        window.onload = () => {
            window.cd = new CanvasDriver();
            window.cd.animate();

            window.onresize = () => cd.on_window_resize();
            window.addEventListener('mousemove', e => cd.on_mouse_move(e));

            window.waitlist_handler = new WaitlistSignup('#waitlist');
        };
    </script>

    <!-- External Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>
